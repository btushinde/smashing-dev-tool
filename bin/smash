#!/usr/bin/env coffee

argv =          require('minimist')(process.argv.slice 2)
chalk =         require 'chalk'
commander =     require 'commander'
inquire =       require 'inquirer'
required =      require 'require-dir'

{logger, notify, execute} = require '../config/util'
{assets, tasks, args, dir, env, pkg} = require '../config/config'


# Configure Commander.js
commander
  .version(pkg.version)
  .option('-v, --verbose',         'Display detailed log information')
  .option('-s, --silent',          'Hide all logs and notifications')
  .option('-w, --watch',          'Watch assets for changes')
  # .on '--help', ->
  #   console.log '  Examples:'
  #   console.log ''
  #   console.log '    $ custom-help --help'
  #   console.log '    $ custom-help -h'
  #   console.log ''


# MAIN MODULES

# Initialization
require('../modules/init')(commander)

# Compile phase
require('../modules/compile')(commander)

# Build phase
require('../modules/build')(commander)

# Deploy phase
require('../modules/deploy')(commander)



# EXTENDED FUNCTIONALITY

# Apps
require('../modules/apps')(commander)


# commander.help()  if argv._.length is 0
commander.parse process.argv
