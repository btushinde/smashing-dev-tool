#!/usr/bin/env coffee
argv      = require('minimist')(process.argv.slice 2)
chalk     = require 'chalk'
commander = require 'commander'
required  = require 'require-dir'
_         = require 'lodash'

smasher   = require '../config/global'

# Load modules to register commands and tasks
require "../modules/#{m}" for m in [
  'generate'
  'compile'
  'build'
  'deploy'
  'test'
  'serve'
  'clean'

  'init'
  'apps'
  'document'

  'help'
]

# Lookup the module needed for this command and init(smasher)
smasher.initCmd argv._[0]

# Parse the arguments for Commander.js
commander.parse process.argv
