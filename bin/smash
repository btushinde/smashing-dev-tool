#!/usr/bin/env coffee
argv      = require('minimist')(process.argv.slice 2)
chalk     = require 'chalk'
commander = require 'commander'
required  = require 'require-dir'
_         = require 'lodash'

smasher   = require '../config/global'
smasher.commander
  .option('-v, --verbose', 'Display detailed logs and notifications')
  .option('-s, --silent', 'Hide all logs and notifications')
  .option('-w, --watch', 'Monitor files for changes and reload browser(s)')

# Load modules to register commands and tasks
require "../modules/#{m}" for m in [
  'generate'
  'compile'
  'build'
  'deploy'
  'test'
  'serve'
  'clean'

  'init'
  'apps'
  'document'
  'help'
]

# Lookup the module needed for this command and init(smasher)
smasher.initCmd argv._[0]

# Parse the arguments for Commander.js
smasher.commander.parse process.argv
